#!/bin/sh
#description: kill a process by name and print a funny utf-8 emoticon
#usage: fuck [you|off] program

#https://gist.github.com/namuol/9122237
#example: fuck you firefox

_flip()
{
    [ -z "${1}" ] && return 1
    printf "%s\\n" "${1}" | sed -e 's:a:É:g'     \
        -e 's:b:Ô›:g' -e 's:c:É”:g' -e 's:d:ð—‰:g'   \
        -e 's:e:Ç:g' -e 's:f:ÉŸ:g' -e 's:g:Æƒ:g'   \
        -e 's:h:É¥:g' -e 's:i:á´‰:g' -e 's:j:É¾:g'   \
        -e 's:k:Êž:g' -e 's:l:|:g' -e 's:m:É¯:g'   \
        -e 's:n:ð—Ž:g' -e 's:p:d:g' -e 's:q:b:g'   \
        -e 's:r:É¹:g' -e 's:t:Ê‡:g' -e 's:u:n:g'   \
        -e 's:v:ÊŒ:g' -e 's:w:Ê:g' -e 's:y:ÊŽ:g' | \
        sed 's/./&\n/g' | tac | sed -e :a -e 'N;s/\n//g;ta'
}

_fuck()
{
    for _fuck__process; do
        if kill -9 $(pgrep "${_fuck__process}") >/dev/null 2>&1; then
            printf "%s %s\\n" 'ãƒ½(`Ð”Â´)ï¾‰âŒ’' "$(_flip "${_fuck__process}")"
        else
            printf "%s\\n" "(ï¼›ï¿£Ð”ï¿£) .oO(not very effective with ${_fuck__process} ...)"
        fi
    done
}

if [ ! -t 0 ]; then
    #there is input comming from pipe or file, add to the end of $@
    set -- "${@}" $(cat)
fi

[ "${#}" -eq "0" ] && { printf "Usage: %s\\n" "$(expr "${0}" : '.*/\([^/]*\)') [you|off] process_name ..." >&2; exit 1; }

case "${1}" in
    you|off) shift ;;
    --) shift; break ;;
    -h|--help) { printf "Usage: %s\\n" "$(expr "${0}" : '.*/\([^/]*\)') [you|off] process_name ..." >&2; exit 1; } ;;
    -*) printf "%s\\n" "$(expr "${0}" : '.*/\([^/]*\)'): unrecognized option \`${1}'" >&2;
        printf "Usage: %s\\n" "$(expr "${0}" : '.*/\([^/]*\)') [you|off] process_name ..." >&2
        exit 1 ;;
esac

_fuck "${@}"
